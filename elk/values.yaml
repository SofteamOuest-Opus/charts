# Default values for ELK.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  tag: stable
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  annotations:
    certmanager.k8s.io/cluster-issuer: letsencrypt-issuer
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/auth-type: basic
    # message to display with an appropriate context why the authentication is required
    nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required'
  path: /
  hosts:
  - kibana.k8.wildwidewest.xyz
  secretName: kibana-secret
  tls:
  - hosts:
    - kibana.k8.wildwidewest.xyz
    secretName: kibana-secret

data:
  hooks:
    drain:
      enabled: False

filebeat:
  config:
    output:
      file:
        enabled: false
      elasticsearch:
        hosts: [ 'elk-elasticsearch-client:9200' ]
        pipeline: opus_log
    setup:
      kibana:
        host: elk-kibana:80

metricbeat:
  deployment:
    debug: true
    modules:
      kubernetes:
        enabled: true
        config:
        - module: kubernetes
          hosts: ["elk-kube-state-metrics:8080"]
  daemonset:
    config:
      output.file:
        enabled: false
      output:
        elasticsearch:
          hosts: [ 'elk-elasticsearch-client:9200' ]
          index: "metricbeat-%{[beat.version]}-%{+yyyy.MM.dd}"
      setup:
        kibana:
          host: elk-kibana:80

elastalert:
  elasticsearch:
    host: elk-elasticsearch-client
    port: 9200

kibana:
  service:
    externalPort: 80
  ingress:
    enabled: False
    hosts:
      - kibana.k8.wildwidewest.xyz
    annotations:
      certmanager.k8s.io/cluster-issuer: letsencrypt-issuer
      kubernetes.io/ingress.class: nginx
    tls:
      - hosts:
          - kibana.k8.wildwidewest.xyz
        secretName: kibana-secret
    secretName: kibana
  env:
    ELASTICSEARCH_URL: http://elk-elasticsearch-client:9200

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}